<script>
const container = document.getElementById('image-container');
const jumpscareDiv = document.getElementById('jumpscare');
const jumpscareImg = jumpscareDiv.querySelector('img');
const centerTitle = document.getElementById('center-title');

const samImages = ['sam.png', 'sam.png', 'sam.png', 'sam.png', 'sam.png', 'sam.png'];
const fonts = ['Comic Sans MS', 'Impact', 'Courier New', 'Georgia', 'Verdana', 'Times New Roman', 'Monospace', 'Cursive', 'Arial Black'];

function getRandom(min, max) {
  return Math.random() * (max - min) + min;
}

function randomFilter() {
  return `hue-rotate(${getRandom(0, 360)}deg) saturate(${getRandom(0.5, 4)}) brightness(${getRandom(0.5, 2)})`;
}

function spawnImage(x = null, y = null, fromClick = false) {
  const img = document.createElement('img');
  img.src = samImages[Math.floor(Math.random() * samImages.length)];
  img.className = 'random-image';

  const width = getRandom(100, 500);
  const height = getRandom(100, 500);
  const rotate = getRandom(0, 360) + 'deg';
  const posX = x !== null ? x : Math.random() * window.innerWidth;
  const posY = y !== null ? y : document.body.scrollHeight + Math.random() * 800;

  img.style.width = `${width}px`;
  img.style.height = `${height}px`;
  img.style.left = `${posX}px`;
  img.style.top = `${posY}px`;
  img.style.setProperty('--rot', rotate);
  img.style.filter = randomFilter();

  // Bounce around randomly
  setInterval(() => {
    const dx = getRandom(-10, 10);
    const dy = getRandom(-10, 10);
    const currentLeft = parseFloat(img.style.left || '0');
    const currentTop = parseFloat(img.style.top || '0');
    img.style.left = `${Math.max(0, currentLeft + dx)}px`;
    img.style.top = `${Math.max(0, currentTop + dy)}px`;
  }, 100); // Adjust speed here

  img.addEventListener('click', (e) => {
    e.stopPropagation();
    for (let i = 0; i < 5; i++) {
      spawnImage(posX + getRandom(-100, 100), posY + getRandom(-100, 100), true);
    }
  });

  container.appendChild(img);
}

function spawnImages(count = 200) {
  for (let i = 0; i < count; i++) {
    spawnImage();
  }
  container.style.minHeight = `${document.body.scrollHeight + 2000}px`;
}

function triggerJumpscare() {
  const randomSam = samImages[Math.floor(Math.random() * samImages.length)];
  jumpscareImg.src = randomSam;
  jumpscareDiv.style.display = 'flex';
  document.body.style.backgroundColor = `hsl(${Math.floor(Math.random() * 360)}, 100%, 20%)`;
  setTimeout(() => {
    jumpscareDiv.style.display = 'none';
  }, 300);
  setTimeout(triggerJumpscare, getRandom(1000, 3000));
}

// Scroll-triggered chaos
window.addEventListener('scroll', () => {
  const scrollPosition = window.scrollY + window.innerHeight;
  const nearBottom = scrollPosition > document.body.scrollHeight - 800;
  const hue = Math.floor((window.scrollY / 5 + getRandom(0, 90)) % 360);
  document.body.style.backgroundColor = `hsl(${hue}, 100%, 10%)`;
  if (nearBottom) {
    spawnImages(100);
  }
});

// Change font every 100ms
setInterval(() => {
  const randomFont = fonts[Math.floor(Math.random() * fonts.length)];
  centerTitle.style.fontFamily = randomFont;
}, 100);

// Initial Load
spawnImages(200);
triggerJumpscare();
</script>
